<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Pokemon.css">
    <title>Pokemon concreto</title>
</head>

<body>
    <script src="Pokemon.js"></script>
    <script>
        var actualPokemon;
        var elUrl;
        var name = window.location.hash.substring(1);

        gameFreak.getName(name).then(() => {
            gameFreak.loadPokemon(link).then(() => {
                actualPokemon = gameFreak.getPokedex();
                document.getElementById("titulo").innerHTML = thisPokemon.name;
                document.getElementById("subtitulo").innerHTML = "id: " + thisPokemon.id;
                document.getElementById("subtitulo2").innerHTML = "order: " + thisPokemon.order;
                if (thisPokemon.types.length === 2) {
                    document.getElementById("cosa").innerHTML = "type: " + thisPokemon.types[0].type.name + "/" + thisPokemon.types[1].type.name;
                } else {
                    document.getElementById("cosa").innerHTML = "type: " + thisPokemon.types[0].type.name
                }
                const currentEl = document.getElementById("End");

                const title = document.createElement("a");
                const newContent = document.createTextNode("Abilities:");
                const abilityWeb = 'ability.html' + '#' + (name);
                title.setAttribute('href', abilityWeb);
                title.appendChild(newContent);
                document.body.insertBefore(title, currentEl);
                for (let i = 0; i < thisPokemon.abilities.length; i++) {
                    addAbility(thisPokemon, i);
                };
                const title1 = document.createElement("h4");
                const newContent1 = document.createTextNode("Forms:");
                title1.appendChild(newContent1);
                document.body.insertBefore(title1, currentEl);
                for (i = 0; i < thisPokemon.forms.length; i++) {
                    addForm(thisPokemon, i);
                };
                const title2 = document.createElement("h4");
                const newContent2 = document.createTextNode("Moves:");
                title2.appendChild(newContent2);
                document.body.insertBefore(title2, currentEl);
                for (let i = 0; i < thisPokemon.moves.length; i++) {
                    addMove(thisPokemon, i);
                };

            });
        });
        function addAbility(thisPokemon, index) {
            const newA = document.createElement("p");
            const newContent = document.createTextNode("ability: " + thisPokemon.abilities[index].ability.name);
            newA.appendChild(newContent);
            const currentEl = document.getElementById("End");
            document.body.insertBefore(newA, currentEl);
        };
        function addForm(thisPokemon, index) {
            const newF = document.createElement("p");
            const newContent = document.createTextNode("form: " + thisPokemon.forms[index].name);
            newF.appendChild(newContent);
            const currentEl = document.getElementById("End");
            document.body.insertBefore(newF, currentEl);
        };
        function addMove(thisPokemon, index) {
            const newM = document.createElement("p");
            const newContent = document.createTextNode("move: " + thisPokemon.moves[index].move.name);
            newM.appendChild(newContent);
            const currentEl = document.getElementById("End");
            document.body.insertBefore(newM, currentEl);
        };


    </script>
    <main>
        <img id="imagen" src="https://upload.wikimedia.org/wikipedia/commons/3/39/Pokeball.PNG">
        <header class="theTitles">
            <h1 id="titulo" style="margin-top: 0px; margin-bottom: 0px;"></h1>
            <h2 id="subtitulo" style="margin-top: 0px; margin-bottom: 0px;"></h2>
            <h3 id="subtitulo2" style="margin-top: 0px"></h3>
            <h3 id="cosa" style="margin-top: 0px; margin-bottom: 0px;"></h3>
            <p id="error"></p>

        </header>

    </main>
    <div id="End"></div>

</body>

</html>