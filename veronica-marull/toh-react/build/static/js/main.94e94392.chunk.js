(this["webpackJsonptoh-react"]=this["webpackJsonptoh-react"]||[]).push([[0],{55:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(4),c=n.n(a),o=n(45),i=n.n(o),s=n(15),u=n(7),h=(n(55),n(16)),p=n(12),l=n.n(p),O=n(18),d=n(46),j=n.n(d),b={LOAD_HEROES:"LOAD_HEROES",LOAD_HERO:"LOAD_HERO",DELETE_HERO:"DELETE_HERO",ADD_HERO:"ADD_HERO",UPDATE_HERO:"UPDATE_HERO",AUTH_LOGIN:"AUTH_LOGIN",AUTH_LOGIN_ERROR:"AUTH_LOGIN_ERROR",AUTH_SIGNOUT:"AUTH_SIGNOUT",AUTH_SIGNOUT_ERROR:"AUTH_SIGNOUT_ERROR"},f=new(n(47).Dispatcher);function v(){return m.apply(this,arguments)}function m(){return(m=Object(O.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()("/api/heroes.json");case 2:t=e.sent,f.dispatch({type:b.LOAD_HEROES,payload:t.data});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(O.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/heroes.json");case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,a=r.find((function(e){return e.id===t})),f.dispatch({type:b.LOAD_HERO,payload:a});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g,y=n(49),x=n(25),H=n(26),R=n(29),_=n(28),L=n(27),k="CHANGE",A=[],T=new(function(e){Object(R.a)(n,e);var t=Object(_.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(H.a)(n,[{key:"getHeroes",value:function(){return A}},{key:"getHero",value:function(){return g}},{key:"getHeroById",value:function(e){return A.find((function(t){return t.id===e}))}},{key:"deleteHero",value:function(e){return A.filter((function(t){return t.id!==e}))}},{key:"updateHero",value:function(e){return A.map((function(t){return e.id===t.id?e:g}))}},{key:"sliceHeroes",value:function(e){return e?A.slice(0,e):[]}},{key:"addEventListener",value:function(e){this.on(k,e)}},{key:"removeEventListener",value:function(e){this.removeListener(k,e)}},{key:"emitChange",value:function(){this.emit(k)}}]),n}(L.EventEmitter));f.register((function(e){switch(e.type){case b.LOAD_HEROES:A=e.payload,T.emitChange();break;case b.DELETE_HERO:A=T.deleteHero(e.payload),T.emitChange();break;case b.ADD_HERO:A=[].concat(Object(y.a)(A),[e.payload]),T.emitChange();break;case b.UPDATE_HERO:A=T.updateHero(e.payload),T.emitChange();break;case b.LOAD_HERO:g=e.payload,T.emitChange()}}));var D=T;var U=function(){var e=Object(a.useState)(D.getHeroes()),t=Object(h.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(h.a)(o,2),u=i[0],p=i[1];function l(){c(D.getHeroes())}return Object(a.useEffect)((function(){return D.addEventListener(l),n&&n.length||v(),function(){D.removeEventListener(l)}}),[n]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{onChange:function(e){return p(e.target.value)},value:u,placeholder:"Enter a new hero name"}),Object(r.jsx)("button",{type:"button",onClick:function(){var e;(e=u).trim()&&f.dispatch({type:b.ADD_HERO,payload:{id:Date.now(),name:e}})},children:"Add"}),(!n||!n.length)&&Object(r.jsx)("h1",{children:"There are no heroes!"}),n&&n.length>0&&n.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)(s.b,{to:"/heroes/".concat(e.id),children:e.name}),Object(r.jsx)("button",{type:"button",onClick:function(){return t=e.id,void f.dispatch({type:b.DELETE_HERO,payload:t});var t},children:"x"})]},e.id)}))]})};var w=function(e){var t=e.match,n=Object(a.useState)(+t.params.heroId),c=Object(h.a)(n,1)[0],o=Object(a.useState)(null),i=Object(h.a)(o,2),s=i[0],u=i[1];function p(){u(D.getHero())}return Object(a.useEffect)((function(){return D.addEventListener(p),c&&!s&&function(e){E.apply(this,arguments)}(c),function(){return D.removeEventListener(p)}}),[c,s]),Object(r.jsxs)(r.Fragment,{children:[!s&&Object(r.jsx)("h1",{children:"There is no hero with id: ".concat(c)}),s&&Object(r.jsx)("h1",{children:"Hero details works... (".concat(s.name,")")})]})};var I=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1];function o(){c(D.sliceHeroes(4))}return Object(a.useEffect)((function(){return D.addEventListener(o),n&&n.length||v(),function(){D.removeEventListener(o)}}),[n]),Object(r.jsxs)(r.Fragment,{children:[!n.length&&Object(r.jsx)("h1",{children:"There are no heroes!"}),n.length&&Object(r.jsx)("ul",{children:n.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(s.b,{to:"/heroes/".concat(e.id),children:e.name})},e.id)}))})]})};var C=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Page not found!"}),Object(r.jsx)("button",{type:"button",onClick:function(){return e.history.push("/")},children:"Back to dashboard"})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},N=n(35),G=(n(82),{apiKey:"AIzaSyBupI73A-O9O9V70kIjtCius26vOBKEljo",authDomain:"toh-react-vero.firebaseapp.com",databaseURL:"https://toh-react-vero.firebaseio.com",projectId:"toh-react-vero",storageBucket:"toh-react-vero.appspot.com",messagingSenderId:"993593911800",appId:"1:993593911800:web:ca78535482ae25f5d1ce0d"});N.a.initializeApp(G),N.a.auth();var F=n(22);function P(e){var t={displayName:e.displayName,email:e.email,phoneNumber:e.phoneNumber,photoURL:e.photoURL};f.dispatch({type:b.AUTHLOGIN,payload:t})}function B(e){f.dispatch({type:e})}function W(){return(W=Object(O.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new F.a.auth.GoogleAuthProvider).addScope("https://www.googleapis.com/auth/contacts.readonly"),e.prev=2,e.next=5,F.a.auth().signInWithPopup(t);case 5:n=e.sent,P(n.user),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),B(b.AUTH_LOGIN_ERROR);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function z(){return(z=Object(O.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.auth().signInWithEmailAndPassword(t,n);case 3:r=e.sent,P(r.user),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),B(b.AUTH_LOGIN_ERROR);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function J(){return(J=Object(O.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.auth().signOut();case 3:f.dispatch({type:b.AUTH_SIGNOUT}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),B(b.AUTH_SIGNOUT_ERROR);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var K,M="CHANGE",V=new(function(e){Object(R.a)(n,e);var t=Object(_.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(H.a)(n,[{key:"emitChange",value:function(){this.emit(M)}},{key:"addChangeListener",value:function(e){this.on(M,e)}},{key:"removeChangeListener",value:function(e){this.removeListener(M,e)}},{key:"getUser",value:function(){return K}}]),n}(L.EventEmitter));f.register((function(e){switch(e.type){case b.AUTH_LOGIN:K=e.payload,V.emitChange();break;case b.AUTH_SIGOUT:K=null,V.emitChange()}}));var q=V,Q=12;var X=function(){var e=Object(a.useState)(q.getUser()),t=Object(h.a)(e,2),n=t[0],c=t[1];function o(){c(q.getUser())}function i(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("button",{type:"button",onClick:function(e){e.preventDefault(),function(e,t){z.apply(this,arguments)}("gilbe.cao@gmail.com","1234")},children:[" ","Email/Password"]})," | ",Object(r.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),function(){W.apply(this,arguments)}()},children:"Google"}),";"]})}return Object(a.useEffect)((function(){return q.addChangeListener(o),function(){return q.removeChangeListener(o)}})),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Tour of heroes"}),Object(r.jsxs)("nav",{className:"toh-navigation",children:[Object(r.jsx)(s.b,{to:"/",children:"Dashboard"})," | ",Object(r.jsx)(s.b,{to:"/heroes",children:"Heroes"})," | ",Object(r.jsx)(s.b,{to:"/heroes/".concat(Q),children:"Narco details"})," | ",n?Object(r.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),function(){J.apply(this,arguments)}()},children:"Sign Out"}):i,n&&Object(r.jsxs)("span",{children:[" "," | "," Welcome ",n.email," "]})]})]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsxs)(s.a,{children:[Object(r.jsx)(X,{}),Object(r.jsx)("hr",{}),Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{path:"/",exact:!0,component:I}),Object(r.jsx)(u.a,{path:"/heroes",exact:!0,component:U}),Object(r.jsx)(u.a,{path:"/heroes/:heroId",component:w}),Object(r.jsx)(u.a,{component:C})]})]})}),document.getElementById("root")),S()}},[[86,1,2]]]);
//# sourceMappingURL=main.94e94392.chunk.js.map